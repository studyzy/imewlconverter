<!--
SYNC IMPACT REPORT

- 版本更改: none → 0.1.0
- 修改的原则: 新增并具体化 5 条原则（见下文）
- 添加的部分: "技术与兼容约束"、"开发与发布流程"
- 删除的部分: 无
- 需要更新的模板/文件:
	- `.specify/templates/plan-template.md` ✅ 已核对（无冲突）
	- `.specify/templates/spec-template.md` ✅ 已核对（无冲突）
	- `.specify/templates/tasks-template.md` ✅ 已核对（无冲突）
	- `.specify/templates/commands/*.md` ⚠ 未找到具体命令文件，待人工核对（如果存在）
- 延迟占位符（需要后续填充）:
	- RATIFICATION_DATE: TODO(RATIFICATION_DATE): 原始采用日期未知，请项目维护者填写
	- MAINTAINERS 列表: TODO(MAINTAINERS): 请补充批准章程的维护者名单

-->

# 深蓝词库转换 项目章程

## 核心原则

### 跨平台兼容与格式互操作性
本项目的首要目标是提供可靠的词库转换能力，覆盖 Windows、Linux、macOS 等主要平台以及常见的词库/编码格式（如 QQ 拼音、搜狗、Rime、百度、MsPinyin 等）。
必须保证：输入与输出在语义上可复现（同一输入在相同参数下应产生相同输出）、转换规则有文档说明、任何格式兼容性断裂都应以契约测试和迁移指南形式记录。

理由：这是项目存在的核心价值 —— 把多种词库格式之间的语义差异安全、可重复地桥接起来。

### 命令行优先与可自动化工具化
所有核心功能应优先以命令行/可脚本化接口暴露（支持批量处理与管道化 I/O：stdin/stdout），工具应能在非交互环境中运行并返回可机器解析的状态码与日志。GUI/桌面应用为附加层，不应承载唯一的自动化能力。

必须保证：CLI 参数文档齐全、批处理与退出码定义清晰、日志与错误输出区分为 stdout/stderr、支持 JSON 输出以便于自动化管道解析。

理由：项目常被用于批量处理与自动化工作流，保持 CLI 第一有利于可重复性与集成。

### 测试优先与契约测试
开发流程必须以测试为先：新增功能或修复必须包含针对主要行为的单元测试与必要的集成/契约测试（特别是不同词库格式之间的边界行为）。CI 必须在合并前验证测试通过。

必须保证：每个支持的输入/输出格式都有至少一套契约测试（coverage 用例覆盖常见及边界字符/编码场景）、回归缺陷必须通过新增测试予以防回归。

理由：词库格式与编码细节多且容易回归，契约测试能在格式变更时提供早期警告并明确兼容性边界。

### 可观测性与可维护性
产物与运行时必须产生日志、可选的调试输出和运行时诊断信息，便于在客户环境或 CI 中重现问题。日志应结构化（JSON 或可解析格式），并包含最小必要的上下文（输入文件名、转换规则/版本、异常堆栈/错误码）。

必须保证：生产/CI 日志保留策略、日志等级定义（INFO/WARN/ERROR/DEBUG）及敏感信息过滤规则应在仓库文档中说明。

理由：可观测性降低排查成本，提升用户支持效率与长期维护能力。

### 语义化版本与兼容性治理
项目采用语义化版本控制（MAJOR.MINOR.PATCH）。任何破坏向后兼容的变更（例如：移除或重新定义现有词库映射、改变主输出格式）必须升级 MAJOR 并在变更说明中提供迁移指南与兼容性策略；新增功能或向后兼容的扩展升级 MINOR；措辞/文档修正、非行为性改进为 PATCH。

必须保证：每次发布都有简明的变更说明；变更若影响第三方或用户脚本，必须包含迁移示例和示范转换用例。

理由：语义化版本与明确的兼容规则让集成方能安全升级并合理安排迁移。

## 技术与兼容约束
本项目主体为 C#/.NET 生态（仓库包含 .NET Framework 与 .NET Core/跨平台构建文件），编译产物与发布放置在 `publish/` 下。发布包需明确标注目标平台（mac-x64、mac-arm64、win32 等）与运行时依赖。第三方库的采用应优先考虑长期维护与跨平台兼容性。

必须保证：构建脚本（Makefile、scripts/、build.sh 等）能在 CI 中以非交互方式运行；二进制与符号/签名流程在发布说明中阐明；重要的依赖升级需在变更中记录潜在影响并提供回退策略。

## 开发与发布流程
- 所有变更通过 Pull Request（PR）进行；PR 必须包含变更说明、关联的测试或再现步骤、影响范围评估。
- CI（包括测试、静态检查和构建打包）必须在 PR 合并前通过。
- 发布流程要求在 release notes 中记录语义化版本、变更摘要、兼容性说明与可能的迁移步骤；对 macOS 的原生应用发布需记录签名/打包细节（见 `publish/` 下示例）。

## 治理
项目章程由仓库维护者维护，任何修正须通过下列流程：

- 提交包含变更说明的 PR。
- 由至少一名维护者审批（TODO(MAINTAINERS): 补充维护者名单）。
- 若变更为破坏性（MAJOR），需在合并前提供迁移计划与至少一套迁移用例/脚本。

日常治理规则：
- 所有 PR 必须包含相关测试或能复现问题的最小示例；未包含测试的改动将被要求补充或拆分。
- 任何安全相关问题（敏感数据泄露、依赖导致的高危漏洞）应立即开紧急修复 PR 并在修复后 7 天内发布 PATCH 版本。

**版本**: 0.1.0 | **批准日期**: TODO(RATIFICATION_DATE) | **最后修正**: 2025-10-21
